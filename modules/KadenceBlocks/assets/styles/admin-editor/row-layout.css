/**
 * Kadence Row Layout block editor preview styles.
 *
 * Mirrors frontend row-layout.css rules for WYSIWYG preview in the editor.
 *
 * ============================================================================
 * EDITOR HTML STRUCTURE (block editor preview)
 * ============================================================================
 *
 * <div class="wp-block-kadence-rowlayout kt-row-column-wrap alignnone kb-row-id-{ID} kt-has-{N}-columns kt-row-layout-equal kt-row-valign-top kt-row-has-bg">
 *   <div class="kt-row-layout-background"></div>
 *   <style>...</style>
 *   <div class="kt-row-layout-overlay kt-row-overlay-normal"></div>
 *   <div class="components-resizable-box__container kt-top-padding-resize kt-padding-resize-box">...</div>
 *   <div class="innerblocks-wrap kb-theme-content-width kt-layout-inner-wrap-id{ID} kb-grid-columns-{N} block-editor-block-list__layout">
 *     <div class="wp-block-kadence-column kadence-column inner-column-1 kadence-column-{ID} kt-column-has-bg">
 *       <style>...</style>
 *       <div class="kadence-inner-column-inner block-editor-block-list__layout">
 *         <!-- Column content -->
 *       </div>
 *     </div>
 *     <!-- Additional columns... -->
 *   </div>
 *   <div class="components-resizable-box__container kt-bottom-padding-resize kt-padding-resize-box">...</div>
 * </div>
 *
 * Key differences from frontend:
 * - .wp-block-kadence-rowlayout and .kt-row-column-wrap are on the SAME element (merged)
 * - .innerblocks-wrap is the flex container for columns (not .kt-row-column-wrap)
 * - Column inner is .kadence-inner-column-inner (not .kt-inside-inner-col)
 * - Extra UI elements: .kt-row-layout-background, .kt-row-layout-overlay, resize handles
 * - Uses kb-row-id-{ID} instead of kb-row-layout-id{ID}
 *
 * Key classes:
 * - .wp-block-kadence-rowlayout   : Block identifier (same element has .kt-row-column-wrap)
 * - .kt-row-column-wrap           : On same element as above (NOT a child like frontend)
 * - .innerblocks-wrap             : Actual flex container for columns
 * - .kb-theme-content-width       : Content width constraint class
 * - .kb-grid-columns-{N}          : CSS grid column count
 * - .wp-block-kadence-column      : Column wrapper
 * - .kadence-inner-column-inner   : Column inner content wrapper
 * - .kt-row-has-bg                : Present when row has background
 *
 */

/**
 * Default vertical padding for rows, varies by context.
 * JS can read this directly from the row element via getComputedStyle.
 * Base: no padding. Background rows: generous section padding.
 */
.wp-block-kadence-rowlayout {
    --kb-row-default-padding: 0;
}
.wp-block-kadence-rowlayout.kt-row-has-bg {
    --kb-row-default-padding: var(--wp--custom--container-inner-v-lg);
}

/**
 * Utility class for measuring default row padding in JS.
 * References the contextual variable set on the row.
 * Child themes can override --kb-row-default-padding to change the default.
 */
.kb-row-default-padding-measure {
    position: absolute;
    visibility: hidden;
    height: var(--kb-row-default-padding, 0);
}

/*
 * ============================================================================
 * INNER WRAPPER RULES (.innerblocks-wrap)
 * Specificity: 0,1,0 - allows Kadence editor styles (0,2,0) to override
 * ============================================================================
 *
 * Note: Only horizontal padding is applied here. Vertical padding is handled
 * by Kadence's resize handles, with default from --kb-row-default-padding.
 *
 * CASCADE ORDER (all at 0,1,0, so source order determines winner):
 * 1. Base alignfull edge padding (horizontal only)
 * 2. Background rows horizontal padding (overwrites #1)
 * 3. Wide container upgrade (container query, upgrades horizontal)
 * 4. Content-width constraint (media query, zeroes horizontal)
 */

/*
 * 1. Base horizontal padding for alignfull rows.
 * Prevents content from touching viewport edge regardless of background.
 */
:where(.has-global-padding > .alignfull:not(.kt-row-has-bg)) > .innerblocks-wrap {
    --kb-padding-left: var(--wp--style--root--padding-left);
    --kb-padding-right: var(--wp--style--root--padding-right);
}
:where(.alignfull:not(.kt-row-has-bg)) > .innerblocks-wrap {
    padding-left: var(--kb-padding-left);
    padding-right: var(--kb-padding-right);
}

/*
 * 2. Rows with backgrounds: horizontal padding only.
 * Vertical padding is handled by Kadence's resize handles in the editor,
 * with default value from --kb-row-default-padding (set above).
 */
:where(.kt-row-has-bg) > .innerblocks-wrap {
    --kb-padding-left: var(--wp--style--root--padding-left);
    --kb-padding-right: var(--wp--style--root--padding-right);
    padding-left: var(--kb-padding-left);
    padding-right: var(--kb-padding-right);
}

/* 3. Wide containers: upgrade horizontal padding to container-inner-h-lg. */
@container kadence-rowlayout (min-width: 580px) {
    :where(.kt-row-has-bg) > .innerblocks-wrap {
        --kb-padding-left: var(--wp--custom--container-inner-h-lg);
        --kb-padding-right: var(--wp--custom--container-inner-h-lg);
    }
}

/* 4. Content-width constraint: zero inner horizontal padding. */
@media (min-width: 768px) {
    :where(.alignfull, .alignwide, .alignxwide):where(:has(> .innerblocks-wrap.kb-theme-content-width))
        > .innerblocks-wrap {
        --kb-padding-left: 0;
        --kb-padding-right: 0;
    }
    /* Note: Outer wrapper padding handled by main/row-layout.css */
}

/*
 * ============================================================================
 * CONTENT WIDTH PRESET RULES (EDITOR)
 * Same preset max-widths as frontend, targeting .innerblocks-wrap.
 * ============================================================================
 */
.wp-block-kadence-rowlayout .innerblocks-wrap.kb-content-width-theme {
    max-width: var(--wp--style--global--content-size);
}

.wp-block-kadence-rowlayout .innerblocks-wrap.kb-content-width-wide {
    max-width: var(--wp--style--global--wide-size);
}

.wp-block-kadence-rowlayout .innerblocks-wrap.kb-content-width-xwide {
    max-width: var(--wp--custom--extra-wide-size);
}
