/**
 * Kadence Row Layout alignment and width constraints.
 *
 * Makes Row Layout respect WordPress alignment system and handles
 * edge padding for alignfull rows with backgrounds.
 *
 * ============================================================================
 * FRONTEND HTML STRUCTURE (public page view)
 * ============================================================================
 *
 * <div class="kb-row-layout-wrap kb-row-layout-id{ID} alignnone|alignwide|alignfull kt-row-has-bg wp-block-kadence-rowlayout">
 *   <div class="kt-row-column-wrap kt-has-{N}-columns kt-row-layout-equal kt-tab-layout-inherit kt-mobile-layout-row kt-row-valign-top kb-theme-content-width">
 *     <div class="wp-block-kadence-column kadence-column{ID} kt-column-has-bg">
 *       <div class="kt-inside-inner-col">
 *         <!-- Column content -->
 *       </div>
 *     </div>
 *     <!-- Additional columns... -->
 *   </div>
 * </div>
 *
 * Key classes:
 * - .kb-row-layout-wrap        : Outer wrapper (background container)
 * - .wp-block-kadence-rowlayout: Block identifier (same element as above)
 * - .kt-row-column-wrap        : Inner flex container for columns
 * - .kt-has-{N}-columns        : Column count (e.g., kt-has-3-columns)
 * - .kt-row-has-bg             : Present when row has background
 * - .kb-theme-content-width    : Content width constraint class
 * - .wp-block-kadence-column   : Column wrapper
 * - .kt-inside-inner-col       : Column inner content wrapper
 *
 * ============================================================================
 * EDITOR HTML STRUCTURE
 * ============================================================================
 * See admin-editor/row-layout.css for editor markup (significantly different).
 *
 */
:where(.wp-block-kadence-rowlayout) {
    container-name: kadence-rowlayout;
    container-type: inline-size;
    &.alignnone,
    &.alignwide {
        width: 100%;
        max-width: var(--wp--style--global--content-size);
        margin-left: auto;
        margin-right: auto;
    }
    &.alignwide {
        max-width: var(--wp--style--global--wide-size);
    }
}

/*
 * Base horizontal padding for alignfull rows.
 * Prevents content from touching viewport edge regardless of background.
 * Vertical padding is only applied when background is present (.kt-row-has-bg).
 */
.wp-block-kadence-rowlayout.alignfull {
    > .kt-row-column-wrap {
        --kb-padding-left: var(--wp--custom--container-inset);
        --kb-padding-right: var(--wp--custom--container-inset);
        padding-left: var(--kb-padding-left);
        padding-right: var(--kb-padding-right);
    }
}

.kt-row-has-bg {
    > .kt-row-column-wrap {
        --kb-padding-top: var(--wp--custom--row-inset-y);
        --kb-padding-left: var(--wp--custom--container-inset);
        --kb-padding-right: var(--wp--custom--container-inset);
        --kb-padding-bottom: var(--wp--custom--row-inset-y);
        padding: var(--kb-padding-top) var(--kb-padding-right) var(--kb-padding-bottom) var(--kb-padding-left);
    }
    /*
     * Alignfull/alignwide rows with content-width constraint:
     * The .kb-theme-content-width class already constrains content to theme width,
     * so we don't need container-inset padding on the inner container.
     * Instead, apply page-gutter to the outer (for screen edge spacing)
     * and zero the inner padding to prevent double-constraining the content.
     */
    @media (min-width: 768px) {
        &:where(.alignfull, .alignwide) {
            &:where(:has(> .kb-theme-content-width)) {
                padding-left: var(--wp--custom--page-gutter);
                padding-right: var(--wp--custom--page-gutter);
                > .kt-row-column-wrap {
                    --kb-padding-left: 0;
                    --kb-padding-right: 0;
                }
            }
        }
    }
}
